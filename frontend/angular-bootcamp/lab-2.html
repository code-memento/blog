<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lab 2 - Découvrir les pipes et les directives | &lt;Code&gt; Memento</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="/images/coding.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#9c27b0">
    <meta name="description" content="...tips and recipes for the busy developer !">
    <meta name="theme-color" content="#9c27b0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.fcf3c2be.css" as="style"><link rel="preload" href="/assets/js/app.64d71a4c.js" as="script"><link rel="preload" href="/assets/js/2.2fc286db.js" as="script"><link rel="preload" href="/assets/js/6.cbd44f55.js" as="script"><link rel="prefetch" href="/assets/js/10.b39132e3.js"><link rel="prefetch" href="/assets/js/11.802b81e3.js"><link rel="prefetch" href="/assets/js/12.32478bcb.js"><link rel="prefetch" href="/assets/js/13.250c60d4.js"><link rel="prefetch" href="/assets/js/14.7236116d.js"><link rel="prefetch" href="/assets/js/15.143401a9.js"><link rel="prefetch" href="/assets/js/16.c1920a5b.js"><link rel="prefetch" href="/assets/js/17.7ca20c53.js"><link rel="prefetch" href="/assets/js/18.b2f33a7c.js"><link rel="prefetch" href="/assets/js/19.ea309895.js"><link rel="prefetch" href="/assets/js/20.72044300.js"><link rel="prefetch" href="/assets/js/21.58568a9d.js"><link rel="prefetch" href="/assets/js/22.6dca05de.js"><link rel="prefetch" href="/assets/js/23.7ce2903e.js"><link rel="prefetch" href="/assets/js/24.850a3019.js"><link rel="prefetch" href="/assets/js/25.d8307b15.js"><link rel="prefetch" href="/assets/js/26.26688451.js"><link rel="prefetch" href="/assets/js/27.4f24e0bd.js"><link rel="prefetch" href="/assets/js/28.31292da4.js"><link rel="prefetch" href="/assets/js/29.1300b0e8.js"><link rel="prefetch" href="/assets/js/3.7f9026cb.js"><link rel="prefetch" href="/assets/js/30.d932522d.js"><link rel="prefetch" href="/assets/js/31.2eccae62.js"><link rel="prefetch" href="/assets/js/32.41eb0902.js"><link rel="prefetch" href="/assets/js/33.b4ed85ba.js"><link rel="prefetch" href="/assets/js/4.f47051e8.js"><link rel="prefetch" href="/assets/js/5.d677fc00.js"><link rel="prefetch" href="/assets/js/7.5dfbfa81.js"><link rel="prefetch" href="/assets/js/8.a26679ad.js"><link rel="prefetch" href="/assets/js/9.0c14c058.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fcf3c2be.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">&lt;Code&gt; Memento</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/frontend/" class="nav-link router-link-active">
  Frontend
</a></div><div class="nav-item"><a href="/tips/" class="nav-link">
  Tips
</a></div><div class="nav-item"><a href="/about-me.html" class="nav-link">
  About me
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/java/" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/frontend/" class="nav-link router-link-active">
  Frontend
</a></div><div class="nav-item"><a href="/tips/" class="nav-link">
  Tips
</a></div><div class="nav-item"><a href="/about-me.html" class="nav-link">
  About me
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Lab 2 - Découvrir les pipes et les directives</span> <!----></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="lab-2-decouvrir-les-pipes-et-les-directives"><a href="#lab-2-decouvrir-les-pipes-et-les-directives" class="header-anchor">#</a> Lab 2 - Découvrir les pipes et les directives</h1> <h3 id="objectifs"><a href="#objectifs" class="header-anchor">#</a> Objectifs</h3> <ul><li>Apprendre à utiliser les pipes,</li> <li>Créer une pipe personnalisée,</li> <li>Créer et utiliser des directives,</li></ul> <h3 id="informations-transverses"><a href="#informations-transverses" class="header-anchor">#</a> Informations transverses</h3> <table><thead><tr><th>Durée</th> <th>min</th></tr></thead> <tbody><tr><td>Difficulté</td> <td>Facile</td></tr> <tr><td>Pré-requis</td> <td>Squelette du Lab 1 (<code>components.zip</code>)</td></tr> <tr><td>Mots-clés</td> <td><code>pipes</code> <code>directives</code></td></tr></tbody></table> <h3 id="ce-que-nous-allons-coder"><a href="#ce-que-nous-allons-coder" class="header-anchor">#</a> Ce que nous allons coder</h3> <p>Nous allons nous baser sur l'application du Lab 1 et l'enrichir avec des nouvelles fonctionnalités :</p> <ul><li>Transformer la date de sortie d'un produit de <code>string</code> à <code>Date</code> et utiliser la pipe <code>date</code>,</li> <li>Créer une pipe qui contrôle la taille de la description d'un produit,</li> <li>Créer des directives personnalisées.</li></ul> <h3 id="a-la-fin-du-lab"><a href="#a-la-fin-du-lab" class="header-anchor">#</a> A la fin du Lab</h3> <p>Vous aurez quelque chose qui ressemble à ça :</p> <p><img src="/assets/img/lab-2-1.2f4a8e8e.png" alt=""></p> <h3 id="commencons"><a href="#commencons" class="header-anchor">#</a> Commençons !</h3> <h5 id="transformer-la-date-de-sortie-a-date"><a href="#transformer-la-date-de-sortie-a-date" class="header-anchor">#</a> Transformer la date de sortie à Date</h5> <p>La date de sortie du Lab précédent est une chaîne de caractères, dans une application réelle il faut que cette données soit un objet de type date car on peut l'afficher sous plusieurs formes et selon le langage du user.</p> <p>Pour celà, il faut changer le type de <code>releasedDate</code> à <code>Date</code> :</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    ...
	releasedDate<span class="token operator">:</span> Date;
    ...
<span class="token punctuation">}</span>
</code></pre></div><p>Ensuite, instancier des dates comme suit :</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    ...
    releasedDate<span class="token operator">:</span> new Date(<span class="token number">2018</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">30</span>)<span class="token punctuation">,</span>
    ...
<span class="token punctuation">}</span>
</code></pre></div><p>Dans le template du produit, appeler la pipe <code>date</code> avec le pattern de votre choix :</p> <div class="language-html extra-class"><pre class="language-html"><code>{{ data.releasedDate | date:&quot;MM/dd/yyyy&quot; }}
</code></pre></div><p>Et voilà :</p> <p><img src="/assets/img/lab-2-0.0ec10eb8.png" alt=""></p> <h5 id="pipe-personnalisee"><a href="#pipe-personnalisee" class="header-anchor">#</a> Pipe personnalisée</h5> <p>Nous pouvons également écrire nos propres pipes personnalisées. Nous les utilisons de la même manière que les pipes fournies par Angular. Nous allons implémenter une pipe personnalisée qui prend une chaîne et la tronque à une longueur spécifiée. Ceci est utile pour afficher une description de produit tronquée si elle est trop longue comme sur la figure :</p> <p>HEREX</p> <p>Créons notre pipe comme toujours avec Angular CLI : <code>ng g p pipes/truncate</code></p> <h6 id="exercice"><a href="#exercice" class="header-anchor">#</a> Exercice</h6> <blockquote><p>Compléter la pipe <code>truncate</code> avec le comportement suivant :</p> <ul><li>Si la le nombre de caractères dépasse <code>n</code> qui est le paramètre du pipe :
<ul><li>Afficher <code>n</code> caractères de la chaînes en entrée suivie de <code>...</code></li></ul></li> <li>Sinon, afficher la chaîne sans modifications</li></ul></blockquote> <h5 id="utiliser-des-directives"><a href="#utiliser-des-directives" class="header-anchor">#</a> Utiliser des directives</h5> <p>Angular contient par défaut plusieurs directives, par exemple :</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">*ngIf</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hero<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{hero.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">*ngFor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>let hero of heroes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{hero.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">[ngSwitch]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hero?.emotion<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-happy-hero</span>    <span class="token attr-name">*ngSwitchCase</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>happy<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span>    <span class="token attr-name">[hero]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hero<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app-happy-hero</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-sad-hero</span>      <span class="token attr-name">*ngSwitchCase</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>sad<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span>      <span class="token attr-name">[hero]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hero<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app-sad-hero</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-confused-hero</span> <span class="token attr-name">*ngSwitchCase</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>app-confused<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">[hero]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hero<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app-confused-hero</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-unknown-hero</span>  <span class="token attr-name">*ngSwitchDefault</span>           <span class="token attr-name">[hero]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hero<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app-unknown-hero</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">[style.display]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>block<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Expression sets display to &quot;block&quot;.
  This paragraph is visible.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">[style.display]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>none<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Expression sets display to &quot;none&quot;.
  This paragraph is hidden but still in the DOM.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="directive-personnalisee"><a href="#directive-personnalisee" class="header-anchor">#</a> Directive personnalisée</h5> <p>La directive que nous allons implémenter a pour objectif de mettre en surbrillance le produit sur lequel pointe le curseur.</p> <p>D'abord, nous allons créer la directive avec la commande : <code>ng g d directives/highlight</code> qui va se charger de l'ajout des différents fichiers et de la mise à jour du fichier <code>app.module.ts</code>.</p> <p>Mettre le code suivant dans <code>highlight.directive.ts</code> :</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Directive<span class="token punctuation">,</span> ElementRef<span class="token punctuation">,</span> HostListener <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>

@<span class="token function">Directive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'[appHighlight]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">HighlightDirective</span> <span class="token punctuation">{</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> el<span class="token operator">:</span> ElementRef<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  @<span class="token function">HostListener</span><span class="token punctuation">(</span><span class="token string">'mouseenter'</span><span class="token punctuation">)</span> <span class="token function">onMouseEnter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">highlight</span><span class="token punctuation">(</span><span class="token string">'#efefef'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  @<span class="token function">HostListener</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">)</span> <span class="token function">onMouseLeave</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">highlight</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">private</span> <span class="token function">highlight</span><span class="token punctuation">(</span>color<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">.</span>nativeElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> color<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Et voilà :</p> <p><img src="/assets/img/Lab-1-1.90ba501f.png" alt=""></p> <h6 id="exercice-2"><a href="#exercice-2" class="header-anchor">#</a> Exercice</h6> <blockquote><p>Dans cet exercice vous allez créer une directive <code>bigtext</code> qui fait le traitement suivant :</p> <ul><li>Si l'élément concerné par la directive est cliqué une première fois, on met la taille du texte à <em>24px</em>,</li> <li>Lors du deuxième clic, si l'élément est déjà cliqué on initialise la taille du texte.</li></ul></blockquote> <h3 id="ce-qu-il-faut-retenir"><a href="#ce-qu-il-faut-retenir" class="header-anchor">#</a> Ce qu'il faut retenir</h3> <ul><li>Les pipes et les directives permettent de réutiliser le code,</li> <li>Elles sont un moyen efficace pour créer du code maintenable et facile à lire,</li> <li>Ils permettent de séparer les différentes couches de l'applications.</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/25/2018, 4:39:26 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend/angular-bootcamp/lab-1.html" class="prev">
        Lab 1 - Composants Angular
      </a></span> <span class="next"><a href="/frontend/angular-bootcamp/lab-3.html">
        Lab 3 - Une application qui communique
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.64d71a4c.js" defer></script><script src="/assets/js/2.2fc286db.js" defer></script><script src="/assets/js/6.cbd44f55.js" defer></script>
  </body>
</html>
